<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Broken Lock</title>
    <script>
        // Hidden flag
        const flag = "CTF{Br3akp01nts_4r3_P0w3rful}";

        // Lock mechanism
        function checkLock(input) {
            let state = 0;
            let sequence = [4, 2, 3, 1]; // Correct sequence to unlock the lock

            for (let i = 0; i < input.length; i++) {
                if (input[i] == sequence[state]) {
                    state++;
                } else {
                    state = 0; // Reset if the sequence is broken
                }

                // Debugging hint: Set a breakpoint here to inspect the state
                if (state === sequence.length) {
                    return true; // Lock unlocked
                }
            }
            return false; // Lock remains locked
        }

        // Handle user input
        function tryUnlock() {
            const userInput = document.getElementById("lockInput").value;
            const numbers = userInput.split(",").map(Number);

            if (checkLock(numbers)) {
                document.getElementById("message").innerText = `Lock unlocked! The flag is: ${flag}`;
            } else {
                document.getElementById("message").innerText = "Lock is still locked. Try again!";
            }
        }
    </script>
</head>
<body>
    <h1>The Broken Lock</h1>
    <p>Enter a sequence of numbers (comma-separated) to unlock the lock:</p>
    <input type="text" id="lockInput" placeholder="e.g., 1,2,3,4">
    <button onclick="tryUnlock()">Unlock</button>
    <p id="message"></p>
</body>
</html>
